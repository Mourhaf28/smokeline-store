<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØµÙˆØ± Ù…Ù† Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background-color: #000;
      font-family: Arial;
      color: #e5c9a0;
      margin: 0;
      padding: 0;
    }

    header {
      text-align: center;
      padding: 20px;
    }

    .back-button {
      position: fixed;
      top: 20px;
      left: 20px;
      background-color: #e5c9a0;
      color: #000;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      text-decoration: none;
      z-index: 1000;
    }

    /* Ø³Ù„Ø§ÙŠØ¯Ø± */
    #slider {
      width: 100%;
      overflow: hidden;
      position: relative;
      max-height: 400px;
    }

    #slide {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-bottom: 2px solid #e5c9a0;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      padding: 40px;
      justify-items: center;
    }

    .gallery-grid img {
      width: 100%;
      max-width: 200px;
      border-radius: 10px;
      box-shadow: 0 0 10px #e5c9a0;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .gallery-grid img:hover {
      transform: scale(1.05);
    }

    /* Popup overlay */
    .popup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    .popup img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
      box-shadow: 0 0 20px #e5c9a0;
    }
  </style>
</head>
<body>

  <!-- Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ -->
  <a href="index.html" class="back-button">â¬…ï¸ Ø±Ø¬ÙˆØ¹</a>

  <header>
    <h2>ğŸ“¸ ØµÙˆØ± Ù…Ù† Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§</h2>
  </header>

  <!-- ğŸ” Ø³Ù„Ø§ÙŠØ¯Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ -->
  <div id="slider">
    <img id="slide" src="" alt="Ø³Ù„Ø§ÙŠØ¯Ø±">
  </div>

  <!-- Ø´Ø¨ÙƒØ© Ø§Ù„ØµÙˆØ± -->
  <div class="gallery-grid" id="gallery"></div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙƒØ¨ÙŠØ± -->
  <div class="popup" id="popup" onclick="this.style.display='none'">
    <img id="popup-img" src="" alt="ØµÙˆØ±Ø© Ù…ÙƒØ¨Ø±Ø©">
  </div>

  <script>
    const username = "Mourhaf28";
    const repo = "smokeline-store";
    const branch = "main";
    const folder = "images";

    const gallery = document.getElementById("gallery");
    const popup = document.getElementById("popup");
    const popupImg = document.getElementById("popup-img");
    const slide = document.getElementById("slide");

    const sliderImages = [];
    let currentSlide = 0;

    fetch(`https://api.github.com/repos/${username}/${repo}/contents/${folder}?ref=${branch}`)
      .then(response => response.json())
      .then(files => {
        const imageUrls = [];

        files.forEach(file => {
          if (file.type === "file" && /\.(jpe?g|png|gif|webp)$/i.test(file.name)) {
            const img = document.createElement("img");
            img.src = file.download_url;
            img.alt = file.name;
            img.onclick = () => {
              popupImg.src = img.src;
              popup.style.display = "flex";
            };
            gallery.appendChild(img);
            imageUrls.push(file.download_url);
          }
        });

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±
        if (imageUrls.length > 0) {
          slide.src = imageUrls[0];
          setInterval(() => {
            currentSlide = (currentSlide + 1) % imageUrls.length;
            slide.src = imageUrls[currentSlide];
          }, 3000); // ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ
        }
      })
      .catch(error => {
        console.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±:", error);
        gallery.innerHTML = "<p style='color:red;'>ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø­Ø§Ù„ÙŠÙ‹Ø§.</p>";
      });
  </script>

</body>
  </html>
