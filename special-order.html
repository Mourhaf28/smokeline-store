<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø·Ù„Ø¨ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø§Øµ</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: sans-serif;
      padding: 20px;
      font-size: 18px;
      line-height: 1.6;
    }

    .box {
      background: #222;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
    }

    label {
      display: block;
      margin-top: 10px;
    }

    input, select, textarea, button {
      padding: 12px;
      margin-top: 5px;
      width: 100%;
      border: none;
      border-radius: 6px;
      background-color: #e5c9a0;
      color: #000;
      font-size: 18px;
    }

    button {
      cursor: pointer;
      margin-top: 20px;
    }

    #region-group {
      display: none;
    }
  </style>
</head>
<body>

  <h2>ğŸ›ï¸ Ø·Ù„Ø¨ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø§Øµ</h2>

  <div class="box">
    <p><strong>Ø§Ù„Ù…Ù†ØªØ¬:</strong> <span id="product-name"></span></p>
    <p><strong>Ø§Ù„Ø³Ø¹Ø±:</strong> <span id="product-price"></span></p>
    <p><strong>Ø§Ù„ÙƒÙ…ÙŠØ©:</strong> <span id="product-quantity"></span></p>
    <p><strong>Ù†Ù‚Ø§Ø· Ø§Ù„ÙˆÙ„Ø§Ø¡:</strong> <span id="product-points"></span></p>
  </div>

  <form onsubmit="submitOrder(event)">
    <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
    <input type="text" id="customer-name" required>

    <label>Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø¥Ù…Ø§Ø±Ø§ØªÙŠ:</label>
    <input type="tel" id="customer-phone" placeholder="05..." required>

    <label>Ø§Ù„Ø¥Ù…Ø§Ø±Ø©:</label>
    <select id="emirate" onchange="showRegion()" required>
      <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¥Ù…Ø§Ø±Ø©</option>
      <option value="Ø¯Ø¨ÙŠ">Ø¯Ø¨ÙŠ</option>
      <option value="Ø£Ø¨ÙˆØ¸Ø¨ÙŠ">Ø£Ø¨ÙˆØ¸Ø¨ÙŠ</option>
      <option value="Ø§Ù„Ø´Ø§Ø±Ù‚Ø©">Ø§Ù„Ø´Ø§Ø±Ù‚Ø©</option>
      <option value="Ø¹Ø¬Ù…Ø§Ù†">Ø¹Ø¬Ù…Ø§Ù†</option>
      <option value="Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©">Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©</option>
      <option value="Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†">Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†</option>
      <option value="Ø§Ù„ÙØ¬ÙŠØ±Ø©">Ø§Ù„ÙØ¬ÙŠØ±Ø©</option>
    </select>

    <div id="region-group">
      <label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</label>
      <input type="text" id="region" required>
    </div>

    <button type="submit">ğŸ“¨ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
  </form>

  <script>
    // Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
    const params = new URLSearchParams(window.location.search);
    const name = params.get("name") || "";
    const price = params.get("price") || "";
    const quantity = params.get("quantity") || "";
    const points = params.get("points") || "0";

    // ØªØ¹Ø¨Ø¦Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶
    document.getElementById("product-name").textContent = name;
    document.getElementById("product-price").textContent = price + " Ø¯Ø±Ù‡Ù…";
    document.getElementById("product-quantity").textContent = quantity + " ÙƒØ±ÙˆØ²";
    document.getElementById("product-points").textContent = points + " Ù†Ù‚Ø·Ø©";

    // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ù‚Ù„ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¥Ù…Ø§Ø±Ø©
    function showRegion() {
      const emirate = document.getElementById("emirate").value;
      document.getElementById("region-group").style.display = emirate ? "block" : "none";
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨
    function submitOrder(e) {
      e.preventDefault();

      const customerName = document.getElementById("customer-name").value.trim();
      const phone = document.getElementById("customer-phone").value.trim();
      const emirate = document.getElementById("emirate").value;
      const region = document.getElementById("region").value.trim();

      if (!phone.startsWith("05")) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 05");
        return;
      }
      // Ø­ÙØ¸ Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Google Sheet
fetch("https://script.google.com/macros/s/AKfycbynhc9JW_QRfjXgI34GPtt8WgRXa_xu-cu_28pU2rPaSPsGe_7FDC2DA_9mHDZtHTDb4Q/exec", {
  method: "POST",
  body: JSON.stringify({
    name: customerName,
    phone: phone,
    points: points,
    source: `Ø¹Ø±Ø¶ Ø®Ø§Øµ: ${name}`
  }),
  headers: {
    "Content-Type": "application/json"
  }
});

      let message = `ğŸ›ï¸ Ø·Ù„Ø¨ Ø¹Ø±Ø¶ Ø®Ø§Øµ\n`;
      message += `ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${customerName}\n`;
      message += `ğŸ“± Ø§Ù„Ø±Ù‚Ù…: ${phone}\n`;
      message += `ğŸ™ï¸ Ø§Ù„Ø¥Ù…Ø§Ø±Ø©: ${emirate}\n`;
      message += `ğŸ“ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${region}\n`;
      message += `\nğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬: ${name}\n`;
      message += `ğŸ“¦ Ø§Ù„ÙƒÙ…ÙŠØ©: ${quantity} ÙƒØ±ÙˆØ²\n`;
      message += `ğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${price} Ø¯Ø±Ù‡Ù…\n`;
      message += `ğŸ¯ Ù†Ù‚Ø§Ø· Ø§Ù„ÙˆÙ„Ø§Ø¡ Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©: ${points}\n`;

      const encoded = encodeURIComponent(message);
      const myNumber = "963960048355"; // â† Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ Ø¨Ø¯ÙˆÙ† +
      window.open(`https://wa.me/${myNumber}?text=${encoded}`, "_blank");
    }
  </script>

</body>
</html>
